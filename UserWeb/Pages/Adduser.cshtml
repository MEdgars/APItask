@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}


<div class="text-center">
    <h1 class="display-4">Input data about User</h1>

    <div>
        <form method="post" class="col-sm-6">
            <div class="form-group row">
                <label asp-for="Input.firstName" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="firstName" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="Input.lastName" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="lastName" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="Input.id" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="id" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="Input.managerId" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="managerId" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="Input.position" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="position" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="Input.hireDate" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="hireDate" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="Input.dischargeDate" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-7">
                    <input name="dischargeDate" class="form-control">
                </div>
            </div>
            <div class="form-group row">

                <div class="col-sm-7 offset-sm-3">
                    <button class="btn btn-primary" id="submit">Submit</button>
                </div>
            </div>
        </form>


        @section scripts{
            <script>
            document.forms[0].onsubmit = () => {
                let formData = new FormData(document.forms[0]);
                var object = {};
                formData.forEach(function (value, key) {
                    object[key] = value;
                });
                var json = JSON.stringify(object);
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    if (this.readyState === 4 && this.status === 200) {
                        alert('Posted using XMLHttpRequest');
                    }
                };
                xhr.open('post', 'https://functionsdatabase.azurewebsites.net/api/users', true);
                xhr.send(json);
            };
            </script>
        }




    </div>
</div>
